#include <stddef.h>
#include "cactus.h"

Cactus cacti[MAX_CACTUS_COUNT];
static size_t creation_index;
static size_t kill_index;
static size_t cactus_count;

static const uint32_t cactus0[] = {
    0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF,
    0xFFFFFFFF, 0xFFFFFFFF, 0xF0000000, 0x0000FFFF,
    0xFFFFFFFF, 0xFFFFFFFF, 0xF0000000, 0x0000FFFF,
    0xFFFFFFFF, 0xFFFFFFFF, 0x00110000, 0x00000FFF,
    0xFFFFFFFF, 0xFFFFFFFF, 0x00110000, 0x00000FFF,
    0xFFFFFFFF, 0xFFFFFFFF, 0x00000000, 0x00000FFF,
    0xFFFFFFFF, 0xFFFFFFFF, 0x00000000, 0x00000FFF,
    0xFFFFFFFF, 0xFFFFFFFF, 0x00000000, 0x00000FFF,
    0xFFFFFFFF, 0xFFFFFFFF, 0x00000000, 0x00000FFF,
    0xFFFFFFFF, 0xFFFFFFFF, 0x0000000F, 0xFFFFFFFF,
    0xFFFFFFFF, 0xFFFFFFFF, 0x00000000, 0x000FFFFF,
    0xFF00FFFF, 0xFFFFFFF0, 0x00000FFF, 0xFFFFFFFF,
    0xFF00FFFF, 0xFFFFFFF0, 0x00000FFF, 0xFFFFFFFF,
    0xFF00FFFF, 0xFFFFF000, 0x00000FFF, 0xFFFFFFFF,
    0xFF000FFF, 0xFFF00000, 0x00000000, 0xFFFFFFFF,
    0xFF00000F, 0xF0000000, 0x00000FF0, 0xFFFFFFFF,
    0xFF00000F, 0xF0000000, 0x00000FF0, 0xFFFFFFFF,
    0xFF000000, 0x00000000, 0x00000FFF, 0xFFFFFFFF,
    0xFFF00000, 0x00000000, 0x00000FFF, 0xFFFFFFFF,
    0xFFFF0000, 0x00000000, 0x00000FFF, 0xFFFFFFFF,
    0xFFFF0000, 0x00000000, 0x0000FFFF, 0xFFFFFFFF,
    0xFFFFF000, 0x00000000, 0x0000FFFF, 0xFFFFFFFF,
    0xFFFFFFF0, 0x00000000, 0x000FFFFF, 0xFFFFFFFF,
    0xFFFFFFFF, 0x00000000, 0x0FFFFFFF, 0xFFFFFFFF,
    0xFFFFFFFF, 0x00000000, 0x0FFFFFFF, 0xFFFFFFFF,
    0xFFFFFFFF, 0xF0000FF0, 0x0FFFFFFF, 0xFFFFFFFF,
    0xFFFFFFFF, 0xF000FFFF, 0x0FFFFFFF, 0xFFFFFFFF,
    0xFFFFFFFF, 0xF00FFFFF, 0x0FFFFFFF, 0xFFFFFFFF,
    0xFFFFFFFF, 0xF00FFFFF, 0x0FFFFFFF, 0xFFFFFFFF,
    0xFFFFFFFF, 0xF000FFFF, 0x000FFFFF, 0xFFFFFFFF,
    0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF,
    0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF
};

static Sprite cactus_sprites[CACTUS_VARIANT_COUNT] = {{4, 32, cactus0}};

void init_cacti() {
	cactus_count = 0;
	creation_index = 0;
	kill_index = 0;
}

void add_cactus() {
	size_t variant = rand() % CACTUS_VARIANT_COUNT;

	cacti[creation_index].sprite = &cactus_sprites[variant];
	cacti[creation_index].x = 79 - cacti[creation_index].sprite->width;
	cacti[creation_index].y = 240;
}
